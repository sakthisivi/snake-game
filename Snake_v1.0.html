<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta http-equiv="Content-Style-Type" content="text/css">
  <title></title>
  <meta name="Generator" content="Cocoa HTML Writer">
  <meta name="CocoaVersion" content="1404.47">
  <style type="text/css">
    p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Helvetica}
    p.p2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Helvetica; min-height: 14.0px}
    span.Apple-tab-span {white-space:pre}
  </style>
</head>
<body>
<p class="p1">&lt;html&gt;</p>
<p class="p1">&lt;head&gt;</p>
<p class="p1">&lt;meta charset="utf-8"/&gt;</p>
<p class="p1">&lt;script src="https://code.jquery.com/jquery-1.10.2.js"&gt;&lt;/script&gt;</p>
<p class="p1">&lt;script&gt;</p>
<p class="p1">var interval;</p>
<p class="p1">var arrowKey=0;</p>
<p class="p1">var x,y;</p>
<p class="p1"><span class="Apple-converted-space"> </span>var snakeRepo = new Array();</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space"> </span>function initialfunc()</p>
<p class="p1">{</p>
<p class="p1">//console.time('repository');</p>
<p class="p1">repository();</p>
<p class="p1">//console.timeEnd('repository');</p>
<p class="p1">//alert("Press any Key to start");</p>
<p class="p2"><br></p>
<p class="p1">interval = setInterval(mainFunction,200);</p>
<p class="p2"><br></p>
<p class="p1">}</p>
<p class="p2"><br></p>
<p class="p1">function createNewtail()</p>
<p class="p1">{</p>
<p class="p1">var tempRect = $('*[class^="rect"]');</p>
<p class="p1">var newTail = Array();</p>
<p class="p1">var activeRect = new Array();</p>
<p class="p1">var x1=[],y1=[];</p>
<p class="p1">for(let i=1;i&lt;=tempRect.length;i++)</p>
<p class="p1">{</p>
<p class="p1">x1[i]= document.getElementsByClassName("rect"+i)[0].getAttributeNS(null,'x');</p>
<p class="p1">y1[i]= document.getElementsByClassName("rect"+i)[0].getAttributeNS(null,'y');</p>
<p class="p1">activeRect.push([parseInt(x1[i]),parseInt(y1[i])]);</p>
<p class="p1">}</p>
<p class="p1">//var dummy = [[700,280],[1,2]];</p>
<p class="p1">console.log(activeRect);</p>
<p class="p1">console.log(activeRect[0][1]);</p>
<p class="p1">newTail = snakeRepo.filter(function (val){<span class="Apple-tab-span">	</span></p>
<p class="p1"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>for (var i=0;i&lt;activeRect.length;i++)</p>
<p class="p1"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>{</p>
<p class="p1"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>if( val[0] == activeRect[i][0] &amp;&amp; val[1] == activeRect[i][1] ){</p>
<p class="p1"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>return false;<span class="Apple-tab-span">	</span>}<span class="Apple-tab-span">	</span></p>
<p class="p1"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>}</p>
<p class="p1"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>return true;</p>
<p class="p1"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>});</p>
<p class="p1">console.log(newTail.length);</p>
<p class="p1">var newTailindexes = newTail[Math.floor(Math.random()*newTail.length)];</p>
<p class="p1">console.log(newTailindexes);</p>
<p class="p2"><br></p>
<p class="p1">var newRect = document.createElementNS('http://www.w3.org/2000/svg','rect');<span class="Apple-converted-space"> </span></p>
<p class="p1"><span class="Apple-converted-space">    </span>newRect.setAttributeNS(null,'class','xrect');</p>
<p class="p1"><span class="Apple-converted-space">    </span>newRect.setAttributeNS(null,'x',newTailindexes[0]);</p>
<p class="p1"><span class="Apple-converted-space">    </span>newRect.setAttributeNS(null,'y',newTailindexes[1]);</p>
<p class="p1"><span class="Apple-converted-space">    </span>newRect.setAttributeNS(null,'width',10);</p>
<p class="p1"><span class="Apple-converted-space">    </span>newRect.setAttributeNS(null,'height',10);</p>
<p class="p1"><span class="Apple-converted-space">    </span>newRect.setAttributeNS(null,'fill','blue');</p>
<p class="p1"><span class="Apple-converted-space">    </span>newRect.setAttributeNS(null,'stroke','blue');</p>
<p class="p1"><span class="Apple-converted-space">    </span>newRect.setAttributeNS(null,'stroke-width',3);</p>
<p class="p1"><span class="Apple-converted-space">    </span>document.getElementById('svghome').appendChild(newRect);</p>
<p class="p1">}</p>
<p class="p2"><br></p>
<p class="p1">function checkArrowKey(e) {</p>
<p class="p1"><span class="Apple-converted-space">    </span>var event = window.event ? window.event : e;</p>
<p class="p1"><span class="Apple-tab-span">	</span>//37 left 38 up 39 right 40 down</p>
<p class="p1"><span class="Apple-tab-span">	</span>if(event.keyCode === 37 || event.keyCode === 38 || event.keyCode === 39 || event.keyCode === 40){</p>
<p class="p1"><span class="Apple-tab-span">	</span>event.preventDefault();</p>
<p class="p1"><span class="Apple-tab-span">	</span>if((arrowKey === 0) ||<span class="Apple-converted-space"> </span></p>
<p class="p1"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>((event.keyCode === 37 || event.keyCode === 39) &amp;&amp; (arrowKey === 38 || arrowKey === 40)) ||<span class="Apple-converted-space"> </span></p>
<p class="p1"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>((event.keyCode === 38 || event.keyCode === 40) &amp;&amp; (arrowKey === 37 || arrowKey === 39)))</p>
<p class="p1"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>{</p>
<p class="p1"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>arrowKey=event.keyCode;</p>
<p class="p1"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>}</p>
<p class="p1"><span class="Apple-tab-span">	</span>}</p>
<p class="p1">//console.log(arrowKey);</p>
<p class="p1">}</p>
<p class="p2"><br></p>
<p class="p1">function repository()</p>
<p class="p1">{</p>
<p class="p1">var xRepo,yRepo,count=0;</p>
<p class="p1">for (xRepo = 310;xRepo &lt;=1085;xRepo=xRepo+15)</p>
<p class="p1"><span class="Apple-tab-span">	</span>{</p>
<p class="p1"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>for (yRepo = 55;yRepo &lt;=535;yRepo=yRepo+15)</p>
<p class="p1"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>{</p>
<p class="p1"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>snakeRepo.push([xRepo,yRepo]);</p>
<p class="p1"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>//console.log(snakeRepo);</p>
<p class="p1"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>count=count+1;</p>
<p class="p1"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>}</p>
<p class="p1"><span class="Apple-tab-span">	</span>}</p>
<p class="p1">console.log(snakeRepo.length);</p>
<p class="p1">}</p>
<p class="p2"><br></p>
<p class="p2"><br></p>
<p class="p1">function mainFunction()</p>
<p class="p1">{</p>
<p class="p1">//console.time('mainFunction');</p>
<p class="p1">var tempRect = $('*[class^="rect"]');</p>
<p class="p1">var x1=[],y1=[];</p>
<p class="p2"><br></p>
<p class="p1">document.addEventListener('keydown', checkArrowKey);</p>
<p class="p1">for(let i=1;i&lt;=tempRect.length;i++)</p>
<p class="p1">{</p>
<p class="p1">x1[i]= document.getElementsByClassName("rect"+i)[0].getAttributeNS(null,'x');</p>
<p class="p1">y1[i]= document.getElementsByClassName("rect"+i)[0].getAttributeNS(null,'y');</p>
<p class="p2"><br></p>
<p class="p1">//console.log(y1[i]);</p>
<p class="p1">}</p>
<p class="p1">//console.log(arrowKey);37 left 38 up 39 right 40 down</p>
<p class="p1">var head = document.getElementsByClassName("rect1")[0];</p>
<p class="p1">var head2 = document.getElementsByClassName("rect2")[0];</p>
<p class="p1">var yHead = head.getAttributeNS(null,'y');</p>
<p class="p1">var xHead = head.getAttributeNS(null,'x');</p>
<p class="p1">var xHead2 = head2.getAttributeNS(null,'x');</p>
<p class="p1">var yHead2 = head2.getAttributeNS(null,'y');</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space"> <span class="Apple-tab-span">	</span></span>if(xHead &lt; 1090 &amp;&amp; xHead &gt; 305 &amp;&amp; yHead &gt; 55 &amp;&amp; yHead &lt; 545<span class="Apple-converted-space">  </span>)</p>
<p class="p1"><span class="Apple-tab-span">	</span>{</p>
<p class="p1"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>switch(arrowKey){</p>
<p class="p1"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>case 37:</p>
<p class="p1"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>head = head.setAttributeNS(null,'x',xHead-15);</p>
<p class="p1"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>break;</p>
<p class="p1"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>case 38:</p>
<p class="p1"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>head = head.setAttributeNS(null,'y',yHead-15);</p>
<p class="p1"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>break;</p>
<p class="p1"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>case 39:</p>
<p class="p1"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>head = head.setAttributeNS(null,'x',parseInt(xHead)+15);</p>
<p class="p1"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>break;</p>
<p class="p1"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>case 40:</p>
<p class="p1"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>head = head.setAttributeNS(null,'y',parseInt(yHead)+15);</p>
<p class="p1"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>break;</p>
<p class="p1"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>default:</p>
<p class="p1"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>head=head.setAttributeNS(null,'y',yHead-15);</p>
<p class="p2"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p1"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>}</p>
<p class="p2"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p1"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>var tail = document.getElementsByClassName("xrect")[0];</p>
<p class="p1"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>if(tail)</p>
<p class="p1"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>{</p>
<p class="p1"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>var xx = tail.getAttributeNS(null,'x');</p>
<p class="p1"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>var yy = tail.getAttributeNS(null,'y');</p>
<p class="p1"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>if(xx == xHead &amp;&amp; yy == yHead)</p>
<p class="p1"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>{</p>
<p class="p1"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>document.getElementsByClassName("xrect")[0].setAttribute("class","rect"+(tempRect.length+1));</p>
<p class="p1"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>console.time('createNewtail');</p>
<p class="p1"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>createNewtail();</p>
<p class="p1"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>console.timeEnd('createNewtail');</p>
<p class="p2"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p1"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>}</p>
<p class="p1"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>}<span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p2"><span class="Apple-tab-span">	</span></p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>let index=1;</p>
<p class="p1"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>for( index=1; index &lt; tempRect.length; index++)<span class="Apple-converted-space"> </span></p>
<p class="p1"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>{</p>
<p class="p1"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>tempRect[index].setAttributeNS(null,'x',x1[index]);</p>
<p class="p1"><span class="Apple-converted-space">       <span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span>tempRect[index].setAttributeNS(null,'y',y1[index]);<span class="Apple-tab-span">	</span></p>
<p class="p1"><span class="Apple-converted-space"> <span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-tab-span">	</span>}</p>
<p class="p1"><span class="Apple-converted-space"> <span class="Apple-tab-span">	</span></span>else</p>
<p class="p1"><span class="Apple-converted-space"> <span class="Apple-tab-span">	</span></span>{</p>
<p class="p1"><span class="Apple-converted-space"> <span class="Apple-tab-span">	</span></span>endFunc();</p>
<p class="p1"><span class="Apple-converted-space"> <span class="Apple-tab-span">	</span></span>}</p>
<p class="p1">//console.timeEnd('mainFunction');</p>
<p class="p1">}</p>
<p class="p1">function endFunc()</p>
<p class="p1">{</p>
<p class="p1">clearInterval(interval);</p>
<p class="p1">alert("Game Over");</p>
<p class="p1">}</p>
<p class="p2"><br></p>
<p class="p1">&lt;/script&gt;</p>
<p class="p1">&lt;/head&gt;</p>
<p class="p1">&lt;body onload="initialfunc();"&gt;</p>
<p class="p2"><br></p>
<p class="p1">&lt;svg xmlns="http://www.w3.org/2000/svg" id="svghome" width="1150" height="1000" &gt;</p>
<p class="p1"><span class="Apple-converted-space">  </span>&lt;rect id="home" x="300" y="50" width="800" height="500" style="fill:rgb(255,255,255);stroke-width:6;stroke:rgb(0,0,0)" /&gt;</p>
<p class="p2"><br></p>
<p class="p2"><br></p>
<p class="p1">&lt;rect class="rect1" x="700" y="505" width="10" height="10" style="fill:rgb(255,0,0);stroke-width:3;stroke:rgb(255,0,0)" /&gt;</p>
<p class="p1">&lt;rect class="rect2" x="700" y="520" width="10" height="10" style="fill:rgb(0,0,0);stroke-width:3;stroke:rgb(0,0,0)" /&gt;</p>
<p class="p1">&lt;rect class="rect3" x="700" y="535" width="10" height="10" style="fill:rgb(0,0,0);stroke-width:3;stroke:rgb(0,0,0)" /&gt;</p>
<p class="p1">&lt;rect class="xrect" x="700" y ="280" width="10" height="10" style="fill:rgb(0,0,255);stroke-width:3;stroke:rgb(0,0,255)" /&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">  </span>Sorry, your browser does not support inline SVG. <span class="Apple-converted-space"> </span></p>
<p class="p1">&lt;/svg&gt;</p>
<p class="p2"><br></p>
<p class="p2"><span class="Apple-converted-space"> </span></p>
<p class="p1">&lt;/body&gt;</p>
<p class="p1">&lt;/html&gt;</p>
<p class="p1">}</p>
</body>
</html>
